# AI APIの仕組み

## このレッスンで学ぶこと

このレッスンを完了すると、AI APIの仕組みを理解し、ChatGPT、Claude、GeminiなどのAIサービスをAPI経由で活用する方法を理解できるようになります。
医療現場でのAI API活用の可能性を学びます。

---

## セクション1: AI APIとは

### AI APIの概要：AI機能を外部から利用

AI APIは、AI機能を外部のアプリケーションから利用するためのAPIです。

**主なAI APIサービス：**
- **OpenAI API**：ChatGPT、GPT-4などを提供
- **Anthropic API**：Claudeを提供
- **Google AI API**：Gemini、PaLMを提供

**医療での活用例：**
- 診療録の自動要約
- 症状から診断候補の提案
- 患者向け説明文の作成

### AI APIとWebインターフェースの違い

AI APIとWebインターフェースの違いを理解することが重要です。

**Webインターフェース：**
- ブラウザで直接ChatGPTを使う
- 人間が直接操作する
- 手動での入力が必要

**AI API：**
- プログラムから自動的にAIを呼び出す
- 他のシステムと統合できる
- 自動化が可能

**医療での利点：**
- 診療録システムから直接AIを呼び出せる
- 診療の流れの中にAIを組み込める
- 効率的な業務自動化

---

## セクション2: AI APIの基本的な使い方

### APIキーの取得：アクセスの準備

AI APIを使うには、まずAPIキーを取得する必要があります。

**取得方法：**
1. AIサービスのウェブサイトでアカウントを作成
2. APIキーを生成
3. APIキーを安全に保管

**医療での注意点：**
- APIキーは機密情報として扱う
- 患者情報と同様に、適切に保護する
- 不正アクセスを防ぐ

### リクエストの送信：AIに質問する

AI APIにリクエストを送信するには、以下の情報が必要です：

**必須情報：**
- **APIキー**：認証情報
- **エンドポイント**：APIのURL
- **プロンプト**：AIに送る指示や質問
- **パラメータ**：温度、最大トークン数など

**医療での例：**
- **プロンプト**：「この症状から考えられる診断を3つ挙げてください」
- **パラメータ**：温度を低く設定（正確性を優先）

### レスポンスの処理：結果を受け取る

AI APIからのレスポンスを処理します。

**レスポンスの内容：**
- **回答テキスト**：AIが生成した回答
- **メタデータ**：使用したトークン数、処理時間など

**医療での活用：**
- 回答を診療録に記録
- 診断支援として医師に提示
- 患者説明文として使用

---

## セクション3: AI APIのコストと制限

### トークンベースの課金：使用量に応じた料金

AI APIは、通常、トークンベースで課金されます。

**トークンとは：**
- AIが処理するテキストの単位
- 日本語では、1単語が複数のトークンになることが多い

**コストの目安：**
- 入力トークン：プロンプトの長さ
- 出力トークン：AIが生成したテキストの長さ

**医療での考慮事項：**
- 長い診療録を要約する場合、コストがかかる
- 頻繁に使用する場合、月額料金を検討
- コストと効果のバランスを考慮

### レート制限：使用量の制限

AI APIには、通常、レート制限があります。

**レート制限の種類：**
- **1分あたりのリクエスト数**：短時間での過剰な使用を防ぐ
- **1日あたりのトークン数**：1日の使用量を制限

**医療での対処法：**
- 重要な用途を優先する
- 使用量を監視する
- 必要に応じてプランをアップグレード

---

## セクション4: 医療現場での活用例

### 診療録の自動要約

AI APIを使って、診療録を自動的に要約できます。

**活用方法：**
- 長い診療録を要点にまとめる
- 重要情報を抽出する
- 他医師への引き継ぎ資料を作成

**メリット：**
- 診療録の整理が効率化
- 重要な情報の見落としを防ぐ
- 時間の節約

### 診断支援

AI APIを使って、症状から診断候補を提案できます。

**活用方法：**
- 患者の症状を入力
- AIが診断候補を提示
- 医師が最終判断を下す

**注意点：**
- AIの判断は参考程度に留める
- 最終的な判断は医師が下す
- 重要な疾患を見逃さない

### 患者向け説明文の作成

AI APIを使って、医療用語を分かりやすく説明できます。

**活用方法：**
- 診断結果を患者向けに説明
- 治療法を分かりやすく説明
- インフォームドコンセントの資料作成

**メリット：**
- 患者の理解を促進
- 説明の標準化
- 時間の節約

---

## まとめ

このレッスンでは、AI APIの仕組みと基本的な使い方を学びました。

次回のレッスンでは、APIの実用例について詳しく学びます。
実際の医療アプリケーションでAI APIをどのように活用するかを、具体的な例を通じて理解していきましょう。
