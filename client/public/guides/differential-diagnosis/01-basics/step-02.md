# ステップ2: AIプロンプトで鑑別診断リストを生成する

## AIプロンプトの基本

AIに鑑別診断リストを生成させるには、具体的で構造化されたプロンプトが必要です。

### 基本プロンプトテンプレート

```
あなたは経験豊富な臨床医です。以下の症例について、鑑別診断を網羅的にリストアップしてください。

【症例情報】
- 年齢・性別: [ここに入力]
- 主訴: [ここに入力]
- 重要な所見: [ここに入力]

【出力形式】
以下の形式で鑑別診断をリストアップしてください：

1. 診断名
   - 支持する所見:
   - 否定的な所見:
   - 確定診断の方法:
   - 緊急性: 高/中/低

頻度と重症度を考慮して、優先順位の高い順に並べてください。
最低5つ、最大10個の鑑別診断を提示してください。
```

---

## 実践例1: 胸痛の鑑別診断

### 入力プロンプト

```
あなたは経験豊富な臨床医です。以下の症例について、鑑別診断を網羅的にリストアップしてください。

【症例情報】
- 年齢・性別: 55歳、男性
- 主訴: 胸痛
- 重要な所見:
  - 突然発症の締め付けられるような胸痛
  - 左肩への放散痛あり
  - 冷や汗を伴う
  - 喫煙歴: 30年
  - 既往歴: 高血圧、脂質異常症

【出力形式】
以下の形式で鑑別診断をリストアップしてください：

1. 診断名
   - 支持する所見:
   - 否定的な所見:
   - 確定診断の方法:
   - 緊急性: 高/中/低

頻度と重症度を考慮して、優先順位の高い順に並べてください。
最低5つ、最大10個の鑑別診断を提示してください。
```

---

### AIの出力例

```
【鑑別診断リスト】

1. 急性冠症候群（ACS） ★
   - 支持する所見: 締め付けられる胸痛、放散痛、冷や汗、喫煙歴、高血圧、脂質異常症
   - 否定的な所見: なし
   - 確定診断の方法: 心電図、心筋逸脱酵素（トロポニン）、冠動脈造影
   - 緊急性: 高

2. 大動脈解離
   - 支持する所見: 突然発症の胸痛
   - 否定的な所見: 背部痛なし、血圧左右差なし（確認必要）
   - 確定診断の方法: 造影CT、経食道心エコー
   - 緊急性: 高

3. 肺塞栓症（PE）
   - 支持する所見: 突然発症の胸痛
   - 否定的な所見: 呼吸困難なし、下肢腫脹なし（確認必要）
   - 確定診断の方法: D-dimer、造影CT
   - 緊急性: 高

4. 胃食道逆流症（GERD）
   - 支持する所見: 胸痛
   - 否定的な所見: 食事との関連なし、胸焼けなし
   - 確定診断の方法: 上部消化管内視鏡、プロトンポンプ阻害薬（PPI）テスト
   - 緊急性: 低

5. 筋骨格系の痛み（肋間神経痛など）
   - 支持する所見: 胸痛
   - 否定的な所見: 圧痛なし（確認必要）、体動との関連なし
   - 確定診断の方法: 身体所見、除外診断
   - 緊急性: 低
```

---

## 実践例2: 意識障害の鑑別診断

### 入力プロンプト

```
あなたは経験豊富な臨床医です。以下の症例について、鑑別診断を網羅的にリストアップしてください。

【症例情報】
- 年齢・性別: 70歳、女性
- 主訴: 意識障害
- 重要な所見:
  - 突然発症
  - 右片麻痺あり
  - 既往歴: 心房細動

【出力形式】
以下の形式で鑑別診断をリストアップしてください：

1. 診断名
   - 支持する所見:
   - 否定的な所見:
   - 確定診断の方法:
   - 緊急性: 高/中/低

頻度と重症度を考慮して、優先順位の高い順に並べてください。
最低5つ、最大10個の鑑別診断を提示してください。
```

---

### AIの出力例

```
【鑑別診断リスト】

1. 脳梗塞 ★
   - 支持する所見: 突然発症、意識障害、右片麻痺、心房細動（塞栓源）
   - 否定的な所見: なし
   - 確定診断の方法: 頭部CT、頭部MRI（DWI）
   - 緊急性: 高

2. 脳出血
   - 支持する所見: 突然発症、意識障害、右片麻痺
   - 否定的な所見: 頭痛・嘔吐なし（確認必要）
   - 確定診断の方法: 頭部CT
   - 緊急性: 高

3. 低血糖
   - 支持する所見: 意識障害
   - 否定的な所見: 麻痺は通常伴わない
   - 確定診断の方法: 血糖測定
   - 緊急性: 高

4. 痙攣後状態（Todd麻痺）
   - 支持する所見: 意識障害、片麻痺
   - 否定的な所見: 痙攣の目撃情報なし
   - 確定診断の方法: 脳波、除外診断
   - 緊急性: 中

5. 髄膜炎・脳炎
   - 支持する所見: 意識障害
   - 否定的な所見: 発熱なし、項部硬直なし（確認必要）
   - 確定診断の方法: 髄液検査
   - 緊急性: 高
```

---

## プロンプトのカスタマイズ

### カスタマイズ1: 鑑別診断の数を増やす

```
【追加の指示】
鑑別診断を最低10個、最大15個提示してください。
```

---

### カスタマイズ2: 特定のカテゴリーを強調する

```
【追加の指示】
VINDICATE法に基づいて、各カテゴリーから最低1つずつ鑑別診断を挙げてください。
```

---

### カスタマイズ3: 優先順位付けの基準を明確にする

```
【追加の指示】
優先順位付けの理由を明確にしてください。特に「Don't miss diagnosis」を強調してください。
```

---

## プロンプトエンジニアリングのコツ

### 1. 役割を明確にする

❌ 悪い例:
```
胸痛の鑑別診断を教えて
```

✅ 良い例:
```
あなたは経験豊富な臨床医です。以下の症例について、鑑別診断を網羅的にリストアップしてください。
```

---

### 2. 情報を構造化する

❌ 悪い例:
```
55歳男性、胸痛、タバコ吸う、高血圧
```

✅ 良い例:
```
【症例情報】
- 年齢・性別: 55歳、男性
- 主訴: 胸痛
- 喫煙歴: 30年
- 既往歴: 高血圧
```

---

### 3. 出力形式を指定する

❌ 悪い例:
```
鑑別診断をリストアップして
```

✅ 良い例:
```
【出力形式】
以下の形式で鑑別診断をリストアップしてください：

1. 診断名
   - 支持する所見:
   - 否定的な所見:
   - 確定診断の方法:
   - 緊急性: 高/中/低
```

---

## まとめ

良いプロンプトの条件：

✅ 役割を明確にする（「あなたは経験豊富な臨床医です」）  
✅ 情報を構造化する（見出しと箇条書き）  
✅ 出力形式を指定する（表形式など）  
✅ 文脈を提供する（主訴、重要な所見）

次のステップでは、実際にAIを使って主訴別の鑑別診断リストを生成します。

---

所要時間: 5分  
次のステップ: 実践編 - 主訴別の鑑別診断リストを生成する
