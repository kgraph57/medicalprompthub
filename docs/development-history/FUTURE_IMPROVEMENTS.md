# Medical Prompt Hub - 今後の改善計画

## 優先度: 高（次回実装推奨）

### 1. 主要プロンプトの詳細化

#### 1.1 Symptom Analysis (OPQRST)
**現状:** 単一のテキストエリア

**改善案:**
- **Onset（発症）**: プルダウン選択
  - 突然、徐々に、繰り返し、その他
- **Palliative/Provocative（緩和・増悪因子）**: テキストエリア
- **Quality（性質）**: プルダウン選択
  - 鋭い、鈍い、締め付けられる、焼けるような、その他
- **Region/Radiation（部位・放散）**: テキストエリア
- **Severity（重症度）**: スライダー（1-10）
- **Time（時間経過）**: テキストエリア

#### 1.2 Lab Result Interpretation
**現状:** 2つのフィールド（検査結果、患者背景）

**改善案:**
- **検査項目**: 複数の検査項目を構造化入力
  - 一般的な検査項目のプルダウン（CBC、電解質、肝機能、腎機能など）
  - 各項目の数値入力フィールド
  - 基準値の表示
- **患者背景**: 構造化入力
  - 年齢: 数値入力
  - 性別: プルダウン（男性、女性、その他）
  - 主訴: プルダウン選択

#### 1.3 Evidence-Based Treatment Plan
**現状:** 2つのフィールド（診断名、患者背景）

**改善案:**
- **診断名**: プルダウン選択（一般的な疾患リスト）+ 自由記載
- **患者背景**: 構造化入力
  - 年齢: 数値入力
  - 性別: プルダウン
  - 合併症: チェックボックス（複数選択可能）
    - 高血圧、糖尿病、慢性腎臓病、肝疾患、心疾患など
  - アレルギー: テキストエリア
  - 妊娠・授乳: プルダウン（該当なし、妊娠中、授乳中）

### 2. 複数選択機能の実装

#### 2.1 既往歴のチェックボックス化
**理由:** 患者は複数の既往歴を持つことが一般的

**実装:**
```typescript
{
  key: 'past_history',
  label: '既往歴',
  type: 'checkbox', // 新しいタイプ
  options: [
    'なし',
    '高血圧',
    '糖尿病',
    '脂質異常症',
    '心疾患',
    '脳血管疾患',
    '慢性腎臓病',
    '肝疾患',
    '悪性腫瘍',
    '喘息・COPD',
    'その他'
  ]
}
```

#### 2.2 PromptDetail.tsxの拡張
チェックボックスタイプをサポートするようにコンポーネントを拡張

### 3. 入力バリデーション

#### 3.1 バイタルサインの範囲チェック
- **体温**: 35.0-42.0°C
- **血圧**: 収縮期 50-250 mmHg、拡張期 30-150 mmHg
- **脈拍**: 30-200 /分
- **呼吸数**: 5-60 /分
- **SpO2**: 50-100 %

#### 3.2 必須フィールドのチェック
- 主訴、現病歴などの重要フィールドを必須化
- 未入力時の警告表示

#### 3.3 リアルタイムバリデーション
- 入力中に範囲外の値を警告
- 不正な形式（例: 血圧が「120」のみ）を検出

## 優先度: 中（次々回実装推奨）

### 4. プリセット機能

#### 4.1 症例パターンの保存
- ユーザーがよく使う症例パターンを保存
- ローカルストレージに保存（プライバシー配慮）
- プリセット名を付けて管理

#### 4.2 プリセットの読み込み
- 保存したプリセットを選択して入力フィールドに自動入力
- プリセットの編集・削除機能

### 5. 入力履歴機能

#### 5.1 最近使用した入力の保存
- 直近10件の入力内容を自動保存
- ローカルストレージに保存

#### 5.2 履歴からの再利用
- 履歴リストから選択して再利用
- 履歴の検索機能

### 6. UI/UXの改善

#### 6.1 入力フィールドのグループ化
- 関連する入力フィールドをアコーディオンでグループ化
- 例: 「基本情報」「バイタルサイン」「検査所見」など

#### 6.2 プログレスインジケーター
- 入力の進捗状況を表示
- 必須フィールドの入力完了率を可視化

#### 6.3 ツールチップの追加
- 各入力フィールドに説明を追加
- 医学用語の簡単な解説

### 7. エクスポート機能

#### 7.1 プロンプトのエクスポート
- 生成されたプロンプトをテキストファイルとしてダウンロード
- クリップボードへのコピー機能の強化

#### 7.2 入力内容のエクスポート
- 入力した症例情報をJSON形式でエクスポート
- 他のツールとの連携を想定

## 優先度: 低（将来的な実装検討）

### 8. AI支援入力

#### 8.1 主訴からの推奨項目提案
- 主訴を選択すると、関連する検査項目を提案
- 例: 「胸痛」→ 心電図、トロポニン、D-dimerなど

#### 8.2 自然言語入力のサポート
- 自由記載のテキストから構造化データを抽出
- 例: 「3日前から38度の発熱」→ 発症: 3日前、体温: 38°C

### 9. モバイル最適化

#### 9.1 レスポンシブデザインの改善
- スマートフォンでの入力体験を最適化
- タッチ操作に適したUI要素

#### 9.2 音声入力のサポート
- 音声認識による入力
- 特に現病歴などの長文入力に有効

### 10. コラボレーション機能

#### 10.1 症例の共有
- 生成したプロンプトをURLで共有
- 共有時のプライバシー設定

#### 10.2 コメント機能
- 他のユーザーからのフィードバック
- 症例に関するディスカッション

### 11. 多言語対応

#### 11.1 英語版の提供
- UIとプロンプトの英語化
- 国際的な利用を想定

#### 11.2 自動翻訳
- 入力内容の自動翻訳
- 英語論文の執筆支援

## 実装の優先順位付け基準

### 高優先度の条件
1. ユーザーの使いやすさに直接影響する
2. 実装コストが比較的低い
3. 既存の機能との互換性が高い
4. 医学的な正確性の向上に寄与する

### 中優先度の条件
1. ユーザー体験の向上に寄与するが、必須ではない
2. 実装コストが中程度
3. 一部のユーザーに特に有用

### 低優先度の条件
1. 実装コストが高い
2. 技術的な制約がある
3. ニッチなユースケース

## 実装スケジュール案

### フェーズ1（1-2週間）
- 主要プロンプトの詳細化（1.1, 1.2, 1.3）
- 複数選択機能の実装（2.1, 2.2）

### フェーズ2（2-3週間）
- 入力バリデーション（3.1, 3.2, 3.3）
- プリセット機能（4.1, 4.2）

### フェーズ3（3-4週間）
- 入力履歴機能（5.1, 5.2）
- UI/UXの改善（6.1, 6.2, 6.3）

### フェーズ4（4-6週間）
- エクスポート機能（7.1, 7.2）
- AI支援入力（8.1, 8.2）

### フェーズ5（6週間以降）
- モバイル最適化（9.1, 9.2）
- コラボレーション機能（10.1, 10.2）
- 多言語対応（11.1, 11.2）

## まとめ

本改善計画は、Medical Prompt Hubをより使いやすく、医学的に正確なツールに進化させるためのロードマップです。優先度の高い項目から順次実装することで、ユーザー体験を段階的に向上させていきます。

ユーザーからのフィードバックを積極的に取り入れ、実際のニーズに基づいた改善を継続的に行っていくことが重要です。
